# รายงานการทดสอบการใช้งานเว็บ (Tester Report)

**วันที่ทดสอบ:** 18 ก.พ. 2026  
**สภาพแวดล้อม:** localhost:3000 (Next.js dev)

---

## 1. หน้ารายการและหน้าหลัก (Public)

| หน้า | URL | ผล | หมายเหตุ |
|------|-----|-----|----------|
| หน้าแรก | `/` | ✅ 200 | Hero, quick stats, ลิงก์วิลล่า/บทความ |
| รายการบ้าน | `/villas` | ✅ 200 | การ์ดวิลล่า ลิงก์ไปหน้ารายละเอียด |
| รายการบทความ | `/articles` | ✅ 200 | การ์ดบทความ ลิงก์ไป slug |
| ติดต่อเรา | `/contact` | ✅ 200 | ฟอร์ม/ปุ่มโทร/LINE ใช้ข้อมูลจาก DB หรือ default |
| แนวทางการลงทุน | `/investment` | ✅ 200 | เนื้อหาคงที่ |

---

## 2. หน้ารายละเอียด (Detail)

| หน้า | URL | ผล | หมายเหตุ |
|------|-----|-----|----------|
| รายละเอียดวิลล่า | `/villas/[id]` | ✅ 200 | วิดีโอ, ข้อมูล, แกลเลอรี่, ตาราง |
| รายละเอียดบทความ | `/articles/[slug]` | ✅ 200 | ปก, หัวข้อ, เนื้อหา HTML |
| วิลล่าไม่พบ | `/villas/bad-id` | ✅ 404 | แสดงหน้า Not Found |
| บทความไม่พบ | `/articles/no-slug` | ✅ 404 | แสดงหน้า Not Found |

---

## 3. SEO / Static

| รายการ | URL | ผล |
|--------|-----|-----|
| robots.txt | `/robots.txt` | ✅ 200 |
| sitemap.xml | `/sitemap.xml` | ✅ 200 |

---

## 4. แอดมิน (Admin)

| หน้า | URL | ผล | หมายเหตุ |
|------|-----|-----|----------|
| ล็อกอิน | `/admin/login` | ✅ 200 | ฟอร์ม username/password |
| แดชบอร์ด | `/admin` | ✅ 200 | ลิงก์ไป villas, articles, contact-settings, projects (ต้องมีคุกกี้) |
| จัดการวิลล่า | `/admin/villas` | ✅ 200 | รายการ + ปุ่มเพิ่ม |
| จัดการบทความ | `/admin/articles` | ✅ 200 | รายการ + ปุ่มเพิ่ม |
| ตั้งค่าติดต่อ | `/admin/contact-settings` | ✅ 200 | ฟอร์มช่องทางติดต่อ |
| จัดการโฆษณา/โครงการ | `/admin/projects` | ✅ 200 | โครงการโฆษณา |
| เพิ่มวิลล่า | `/admin/villas/new` | ✅ 200 | ฟอร์มเพิ่มบ้าน |
| เพิ่มบทความ | `/admin/articles/new` | ✅ 200 | ฟอร์ม + ตัวแก้ไขเนื้อหา |

**หมายเหตุ:** หน้าแอดมินที่ต้องล็อกอินควร redirect ไป `/admin/login` เมื่อยังไม่มีคุกกี้ — แนะนำให้ทดสอบในเบราว์เซอร์ (ล็อกอินด้วย admin / poolvilla@2026 แล้วลองเข้าหน้าต่างๆ)

---

## 5. API

| เมธอด | URL | ผล | หมายเหตุ |
|--------|-----|-----|----------|
| POST | `/api/admin/login` (user+pass ถูก) | ✅ 200 | คืน `{ ok: true }` + set cookie |
| POST | `/api/admin/login` (รหัสผิด) | ✅ 401 | คืนข้อความผิดพลาด |
| GET | `/api/admin/villas` (ไม่มี auth) | ✅ 401 | ป้องกันแล้ว |
| GET | `/api/admin/articles` (ไม่มี auth) | ✅ 401 | ป้องกันแล้ว |

---

## 6. บัคที่แก้ระหว่างทดสอบ

1. **generateMetadata ในหน้าละเอียดวิลล่า/บทความ**  
   ถ้า DB หรือ `getVillaForDetail` / `getArticleBySlugOrId` throw จะทำให้ทั้งหน้ากลับ 500  
   **แก้:** ใส่ `try/catch` ใน `generateMetadata` ของทั้งสองหน้า คืน metadata พื้นฐาน (เช่น title "ไม่พบบ้าน" / "ไม่พบบทความ") เมื่อเกิด error

---

## 7. สิ่งที่ควรทดสอบด้วยมือ (Manual)

- **ล็อกอินแอดมิน:** เข้า `/admin/login` → ใส่ admin / poolvilla@2026 → ต้องไปที่ `/admin` และเข้าหน้าต่างๆ ได้
- **ออกจากระบบ:** กดออกจากระบบ แล้วเข้า `/admin` ต้องถูก redirect ไปล็อกอิน
- **ฟอร์มติดต่อ (หน้าสาธารณะ):** หน้าหน้า Contact กดปุ่มโทร/LINE ว่าลิงก์ถูกต้อง
- **แอดมิน – เพิ่ม/แก้วิลล่า:** สร้างหรือแก้บ้าน บันทึก ตรวจบน `/villas` และหน้ารายละเอียด
- **แอดมิน – เพิ่ม/แก้บทความ:** สร้างหรือแก้บทความ แทรกรูปจาก Quill บันทึก ตรวจบน `/articles` และหน้ารายละเอียด
- **แอดมิน – อัปโหลดรูป:** ในฟอร์มวิลล่า/บทความ ลองอัปโหลดรูป (ต้องตั้งค่า Supabase/ env แล้ว)
- **มือถือ:** เปิดบนหน้าจอเล็ก ตรวจเมนู/การ์ด/ฟอร์ม

---

## สรุป

- หน้าสาธารณะและหน้ารายละเอียดโหลดได้ (200) และกรณีไม่พบข้อมูลเป็น 404
- API ล็อกอินและ API แอดมิน (ไม่มี auth) ทำงานตามที่ออกแบบ
- แก้บัค `generateMetadata` เพื่อไม่ให้ 500 เมื่อ DB หรือฟังก์ชันดึงข้อมูล error  
แนะนำให้ทดสอบล็อกอินและฟอร์มแอดมินในเบราว์เซอร์ตามรายการ Manual ด้านบน
